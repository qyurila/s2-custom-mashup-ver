import { type NextPage } from "next"
import Head from "next/head"
import { useState } from "react"
import AboutButton from "../components/AboutButton"
import Controls from "../components/Controls"
import ListModal from "../components/ListModal"
import PlayerContainer from "../components/PlayerContainer"

const Home: NextPage = () => {
	const [isPlayerVisible, setIsPlayerVisible] = useState(true)
	const [isSelectOpen, setIsSelectOpen] = useState(false)

	const handleCloseSelect = () => {
		setIsSelectOpen(false)
		setIsPlayerVisible(true)
	}

	const handleOpenSelect = () => {
		setIsSelectOpen(true)
		setTimeout(() => setIsPlayerVisible(false), 500)
	}

	return (
		<>
			<Head>
				<title>S2합작 커스텀 매시업버젼</title>
				<meta name="description" content="Generated by create-t3-app" />
				<link rel="icon" href="/favicon.ico" />
			</Head>
			<main className="fixed flex min-h-screen w-screen flex-col items-center justify-center bg-black">
				<PlayerContainer isVisible={isPlayerVisible} />
				<Controls openSelect={handleOpenSelect} />
				<ListModal isOpen={isSelectOpen} onClose={handleCloseSelect} />
			</main>
			<AboutButton />
		</>
	)
}

export default Home
