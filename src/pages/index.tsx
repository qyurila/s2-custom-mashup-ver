import { type NextPage } from "next"
import Head from "next/head"
import { Video } from "../components/Video"
import { Controls } from "../components/Controls"
import versionList from "../data/video-list"
import { useState } from "react"
import SelectModal from "../components/SelectModal"

const Home: NextPage = () => {
	const [isVideoSelected, setIsVideoSelected] = useState(
		versionList.map((version) => version.selectedByDefault)
	)
	const [showModal, setShowModal] = useState(false)

	const toggleVideo = (index: number) => () => {
		const newIsVideoSelected = [...isVideoSelected]
		newIsVideoSelected[index] = !newIsVideoSelected[index]
		setIsVideoSelected(newIsVideoSelected)
	}

	return (
		<>
			<Head>
				<title>Create T3 App</title>
				<meta name="description" content="Generated by create-t3-app" />
				<link rel="icon" href="/favicon.ico" />
			</Head>
			<main className="fixed flex min-h-screen w-screen flex-col items-center justify-center bg-black">
				<div className="container grid grid-cols-2 items-center justify-center justify-items-center px-4 py-16">
					<Video />
					<Video />
					<Video />
					<Video />
				</div>
				<Controls modalOpen={setShowModal} />
				<SelectModal
					show={showModal}
					isVideoSelected={isVideoSelected}
					toggleVideo={toggleVideo}
					onClose={() => setShowModal(false)}
				/>
			</main>
		</>
	)
}

export default Home
